<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>AMD、CMD、Common.js和ES6的异同 | 文王之殇 –前端加油站</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="AMD、CMD、Common.js和ES6的异同" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AMD/CMD/Common.js 和ES6的异同" />
<meta property="og:description" content="AMD/CMD/Common.js 和ES6的异同" />
<link rel="canonical" href="http://localhost:4000/B_Js/AMD_CMD/" />
<meta property="og:url" content="http://localhost:4000/B_Js/AMD_CMD/" />
<meta property="og:site_name" content="文王之殇 –前端加油站" />
<script type="application/ld+json">
{"url":"http://localhost:4000/B_Js/AMD_CMD/","headline":"AMD、CMD、Common.js和ES6的异同","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/siteicon.png"}},"description":"AMD/CMD/Common.js 和ES6的异同","@type":"Article","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="文王之殇 --前端加油站" />

		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">
		<link rel="stylesheet" href="/css/main.css">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/images/favicon.png">

		
	</head>

	<body>
		<div class="righttips" id="backtop">
			返回
		</div>
		<header>
			<div class="left_head">	
				<h1>
					<a href="/"><img src="/images/emblem.svg" width="40" height="40" alt="文王之殇 --前端加油站 logo"></a>
					文王之殇 --前端加油站
					<button type="button" class="open-nav" id="open-nav"></button>
				</h1>

				<form action="/search/" method="get">
					<input type="text" name="q" id="search-input" placeholder="Search" autofocus>
					<input type="submit" value="Search" style="display: none;">
				</form>

			</div>
		
			<nav class="full-navigation">
				<ul>
					<li class="nav-item top-level ">
						
						<a href="/">欢迎</a>
					</li>
				</ul>

				<ul>
					
					
						<li class="nav-item top-level ">
							
							<a href="/A_Css/vetically/">CSS</a>
							<ul>
								
									<li class="nav-item "><a href="/A_Css/vetically/">垂直居中</a></li>
								
									<li class="nav-item "><a href="/A_Css/box/">盒模型</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level current">
							
							<a href="/B_Js/AMD_CMD/">JS 基础及概念</a>
							<ul>
								
									<li class="nav-item current"><a href="/B_Js/AMD_CMD/">AMD、CMD、Common.js和ES6的异同</a></li>
								
									<li class="nav-item "><a href="/B_Js/es6_export/">export、export default 和 module.export的异同</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/B_Js/js_curry/">JS</a>
							<ul>
								
									<li class="nav-item "><a href="/B_Js/js_curry/">函数柯里化</a></li>
								
									<li class="nav-item "><a href="/B_Js/js_eventloop/">js 事件执行机制</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/C_Vue/vue_1/">Vue</a>
							<ul>
								
									<li class="nav-item "><a href="/C_Vue/vue_1/">Vue2 迁移到 Vue3 都有哪些变化</a></li>
								
									<li class="nav-item "><a href="/C_Vue/vue_2/">Vue3 源码 (3.2)</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/D_Vite/vite_1/">Vite</a>
							<ul>
								
									<li class="nav-item "><a href="/D_Vite/vite_1/">Vite 基础</a></li>
								
									<li class="nav-item "><a href="/D_Vite/vite_2/">Vite 的构建工具</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/D_Webpack/webpack_1/">Webpack</a>
							<ul>
								
									<li class="nav-item "><a href="/D_Webpack/webpack_1/">Webpack 基础和进阶</a></li>
								
									<li class="nav-item "><a href="/D_Webpack/webpack_2/">Webpack 和 Vite 的比较</a></li>
								
									<li class="nav-item "><a href="/D_Webpack/webpack_3/">前端如何利用Webpack进行代码分析和优化</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/E_Node/node_1/">Node</a>
							<ul>
								
									<li class="nav-item "><a href="/E_Node/node_1/">Express的基础</a></li>
								
									<li class="nav-item "><a href="/E_Node/node_2/">Koa 基础</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/F_MiniProgram/mini_1/">小程序</a>
							<ul>
								
									<li class="nav-item "><a href="/F_MiniProgram/mini_1/">小程序渲染机制 --- 以微信小程序为例</a></li>
								
									<li class="nav-item "><a href="/F_MiniProgram/min_2/">小程序开发步骤讲解</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/G_Angular/angular_1/">Angular</a>
							<ul>
								
									<li class="nav-item "><a href="/G_Angular/angular_1/">浅析angular</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/K_React/react_1/">React</a>
							<ul>
								
									<li class="nav-item "><a href="/K_React/react_1/">React基础</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/L_Basic/web_1/">前端杂谈</a>
							<ul>
								
									<li class="nav-item "><a href="/L_Basic/web_1/">浏览器的渲染机制</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_2/">前端部署的发展历程</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_3/">浏览器缓存机制</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_4/">xhr 和 fetch请求方式的比较</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_5/">输入一个url发生了什么</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_6/">http 演进</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_7/">前端大厦的基石 --- AST</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_8/">浅谈前端优化的方向</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_9/">浏览器内存泄漏</a></li>
								
									<li class="nav-item "><a href="/L_Basic/web_10/">浏览器储存（cookie、localStorage、sessionStorage和IndexDB）</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/M_Program/program_1/">项目</a>
							<ul>
								
									<li class="nav-item "><a href="/M_Program/program_1/">数据可视化项目</a></li>
								
									<li class="nav-item "><a href="/M_Program/program_2/">新零售会员通 -- 天猫 有赞 微信会员渠道打通项目</a></li>
								
									<li class="nav-item "><a href="/M_Program/program_3/">温顾知新</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/N_math/math_1/">算法</a>
							<ul>
								
									<li class="nav-item "><a href="/N_math/math_1/">动态规划</a></li>
								
							</ul>
						</li>
					
				</ul>

				<ul>
					<li class="nav-item top-level ">
						
						<a href="/changelog/">Change Log</a>
					</li>
				</ul>
			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<!-- <h2>JS 基础及概念</h2> -->
				<h3>AMD、CMD、Common.js和ES6的异同</h3>
			</div>
			<article class="content">
				<p>AMD/CMD/Common.js 和ES6的异同</p>

<blockquote>
  <p>一、同步加载</p>
</blockquote>

<p>common.js 主要是同步加载，主要应用于Node.js 环境
commonJS用同步的方式加载模块。在服务端，模块文件都存在本地磁盘，读取非常快，所以这样做不会有问题。但是在浏览器端，限于网络原因，更合理的方案是使用异步加载。</p>

<blockquote>
  <p>二、异步加载</p>
</blockquote>

<p>1、AMD 和require.js  <br />
    a、多个JS文件可能有依赖关系，被依赖的文件需要早于依赖它的文件加载到浏览器。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b、JS加载的时候，浏览器会停止渲染页面，加载文件越多，浏览器失去响应时间越长。  

AMD规范采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。这里介绍用require.js实现AMD规范的模块化：用require.config()指定引用路径等，用define()定义模块，用require()加载模块。
</code></pre></div></div>

<p>2、CMD 和 sea.js<br />
    CMD是另一种js模块化方案，它与AMD很类似，不同点在于：AMD 推崇依赖前置、提前执行，CMD推崇依赖就近、延迟执行。此规范其实是在sea.js推广过程中产生的。</p>

<p>3、ES6 MODULE<br />
    ES6 在语言标准的层面上，实现了模块功能，而且实现得相当简单，旨在成为浏览器和服务器通用的模块解决方案。其模块功能主要由两个命令构成：export和import。export命令用于规定模块的对外接口，import命令用于输入其他模块提供的功能</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>使用import命令的时候，用户需要知道所要加载的变量名或函数名。其实ES6还提供了export default命令，为模块指定默认输出，对应的import语句不需要使用大括号。这也更趋近于ADM的引用写法。
</code></pre></div></div>

<blockquote>
  <p>三、 ES6 模块与 CommonJS 模块的差异</p>
</blockquote>

<ol>
  <li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CommonJS 模块输出的是值的拷贝，也就是说，一旦输出一个值，模块内部的变化就影响不到这个值。
ES6 模块的运行机制与 CommonJS 不一样。JS 引擎对脚本静态分析的时候，遇到模块加载命令import，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值。换句话说，ES6 的import有点像 Unix 系统的“符号连接”，原始值变了，import加载的值也会跟着变。因此，ES6 模块是动态引用，并且不会缓存值，模块里面的变量绑定其所在的模块。   2. CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。  
运行时加载: CommonJS 模块就是对象；即在输入时是先加载整个模块，生成一个对象，然后再从这个对象上面读取方法，这种加载称为“运行时加载”。
编译时加载: ES6 模块不是对象，而是通过 export 命令显式指定输出的代码，import时采用静态命令的形式。即在import时可以指定加载某个输出值，而不是加载整个模块，这种加载称为“编译时加载”。
</code></pre></div></div>

<p>总结：CommonJS 加载的是一个对象（即module.exports属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成。</p>


			</article>
		</section>

		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
			document.getElementById("backtop").addEventListener("click", function () {
				document.body.scrollTop = 0;
    		document.documentElement.scrollTop = 0;
			});

		</script>
	</body>
</html>
